<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="./images/k.jpg" type="image/x-icon">

    <link rel="stylesheet" href="css/blogin.css">
    <title>read blog</title>
</head>
<body>
    <h1 id="title"></h1>
    <img src="" alt="" id="image">
    <div id="author">
        <p id="author-name"><i class="fa fa-user" style="font-size:24px"></i> Author: Amiir MUGISHA</p>
        <!-- <p><i class="fa fa-calendar-o" style="font-size:24px"></i> date: january 2022</p> -->

    </div>
    


    <p id="descr"></p>
    <hr>
    <div id="comments">
        <h3>comments</h3>
        <ul id="comments-list">
            
        </ul>
    </div>
    <div class="comment">
        <textarea name="" id="comment" cols="30" rows="5" placeholder="enter your comment"></textarea><br>
        <p id="err"></p>
        <button id="btn">comment</button>
    </div>
    <script src="js/blogin.js"></script>

    <!-- <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-storage.js"></script>

    <script type="module">
        const firebaseConfig = {
          apiKey: "AIzaSyA79T2QPGtJUheym11odQl49i40JvOsHu0",
          authDomain: "my-brand-646a9.firebaseapp.com",
          projectId: "my-brand-646a9",
          storageBucket: "my-brand-646a9.appspot.com",
          messagingSenderId: "981736859707",
          appId: "1:981736859707:web:91087d58992aabffa8941e"
        };
      
        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);

        const db = app.firestore();


        //getting comments from the DOM

        const com = document.querySelector('#comment')
        const comments = document.querySelector('#comments')
        const username = document.getElementById('name')
        const btn = document.getElementById('btn')

        btn.addEventListener('click', () => {
            let commenter = username.value;
            let commented = comment.value ;

            
                    db.collection("comments").add({
                commenter: commenter,
                comment : commented
            })
            .then((docRef) => {
                console.log("Document written with ID: ", docRef.id);
            })
            .catch((error) => {
                console.error("Error adding document: ", error);
            });
        })

        function renderComments(doc) {
            const listed = document.querySelector('#comments-list')
            let li = document.createElement('li')
            let name = document.createElement('p')
            let commentt = document.createElement('span')
            li.setAttribute('data-id' , doc.id)
            name.textContent = doc.data().commenter;
            commentt.textContent = doc.data().comment;

            // name.appendChild(commentt)
            li.appendChild(name);
            li.appendChild(commentt);
            listed.appendChild(li)

            
        }
        
        db.collection('comments').get().then((snapshot) => {
            snapshot.docs.forEach(doc => {
                renderComments(doc)
            })
        })




//         db.collection("comments").doc("o56n7V2G9V8vYiXI18oA").delete().then(() => {
//     console.log("Document successfully deleted!");
// }).catch((error) => {
//     console.error("Error removing document: ", error);
// });

// db.collection("comments").get().then((querySnapshot) => {
//     querySnapshot.forEach((doc) => {
//         console.log(`${doc.id} => ${doc.data()}`);
//     });
// });






      </script> -->
</body>
</html>